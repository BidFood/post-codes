<html>
<head>
<title>Test Urban FoodService Integration</title>
</head>
<body>
<h1>Test Urban FoodService Integration</h1>
<input type="text" id="postcodeInput" placeholder="Eg. SE7 2AZ">
<button type="submit" id="PSTCD_Check">Submit</button>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.7.2.min.js"></script>

<script>
function valid_postcode(postcode) {
    var regex = /^[A-Z]{1,2}[0-9]{1,2} [0-9][A-Z]{2}$/i;
    return regex.test(postcode);
}    
(function ($) {
  function bindSubmitButton() {
    $("#PSTCD_Check").click(function() {
      var postalCode = $("#postcodeInput").val().trim();
      if (! valid_postcode(postalCode)) {
          alert("Please enter a valid post code including the space.");
          return;
      }
      var newUrl = "https://shop.urbanfoodservice.co.uk/auth/register.aspx?Postcode=";
      newUrl = newUrl + encodeURIComponent(postalCode);
      window.location = newUrl;
    });
  }
  $(document).ready(function() {
    bindSubmitButton();
  });
}(jQuery));
</script>
</body>
</html>

